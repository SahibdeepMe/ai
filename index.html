<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jarvis - DeepSeek AI Assistant</title>
<style>
  body {
    background-color: #0d1117;
    color: #e6edf3;
    font-family: "Segoe UI", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
  }
  .container {
    text-align: center;
    width: 90%;
    max-width: 500px;
    background: #161b22;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
  }
  h1 {
    color: #58a6ff;
  }
  #status {
    margin: 12px 0;
    color: #8b949e;
  }
  textarea {
    width: 100%;
    height: 80px;
    border-radius: 8px;
    border: none;
    padding: 10px;
    font-size: 16px;
    background: #0d1117;
    color: #e6edf3;
    resize: none;
  }
  button {
    margin: 10px;
    padding: 10px 20px;
    background: #238636;
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
  }
  button:hover {
    background: #2ea043;
  }
  .secondary {
    background: #30363d;
  }
  .secondary:hover {
    background: #484f58;
  }
  #output {
    margin-top: 20px;
    background: #0d1117;
    border-radius: 10px;
    padding: 10px;
    color: #e6edf3;
    text-align: left;
    min-height: 40px;
  }
</style>
</head>
<body>
<div class="container">
  <h1>üéôÔ∏è Jarvis - DeepSeek AI</h1>
  <div id="status">Ask me anything...</div>
  <textarea id="userInput" placeholder="Type your question..."></textarea>
  <div>
    <button id="askBtn">Ask (Chat Mode)</button>
    <button id="voiceBtn" class="secondary">üé§ Voice Mode</button>
  </div>
  <div id="output"></div>
</div>

<script>
  // üß† DeepSeek Configuration
  const DEEPSEEK_API_URL = "https://api.deepseek.com/v1/chat/completions";
  const DEEPSEEK_API_KEY = "your_deepseek_api_key_here"; // üîë Replace with your valid key
  const MODEL = "deepseek-chat";

  const userInput = document.getElementById("userInput");
  const output = document.getElementById("output");
  const statusEl = document.getElementById("status");
  const askBtn = document.getElementById("askBtn");
  const voiceBtn = document.getElementById("voiceBtn");

  // üé§ Speak Text
  function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 1;
    utterance.pitch = 1;
    speechSynthesis.speak(utterance);
  }

  // üß© Fetch Answer from DeepSeek
  async function queryDeepSeek(prompt) {
    try {
      const res = await fetch(DEEPSEEK_API_URL, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${DEEPSEEK_API_KEY}`,
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          model: MODEL,
          messages: [{ role: "user", content: prompt }],
        }),
      });

      if (!res.ok) {
        console.error("API error:", res.status, await res.text());
        return "I'm having trouble reaching DeepSeek right now. Please try again later.";
      }

      const data = await res.json();
      const answer = data?.choices?.[0]?.message?.content;
      return answer?.trim() || "I couldn't find an answer.";
    } catch (err) {
      console.error("Fetch failed:", err);
      return "An error occurred while fetching the answer.";
    }
  }

  // üí¨ Handle Text Question
  askBtn.addEventListener("click", async () => {
    const question = userInput.value.trim();
    if (!question) return;
    statusEl.textContent = "Thinking...";
    output.textContent = "";
    const answer = await queryDeepSeek(question);
    output.textContent = answer;
    statusEl.textContent = "Answer ready!";
  });

  // üéôÔ∏è Handle Voice Mode
  voiceBtn.addEventListener("click", () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";
    recognition.start();
    statusEl.textContent = "Listening... üéß";

    recognition.onresult = async (event) => {
      const userSpeech = event.results[0][0].transcript;
      userInput.value = userSpeech;
      statusEl.textContent = "Processing your question...";
      const answer = await queryDeepSeek(userSpeech);
      output.textContent = answer;
      statusEl.textContent = "Speaking...";
      speak(answer);
    };

    recognition.onerror = () => {
      statusEl.textContent = "Voice recognition error. Please try again.";
    };
  });
</script>
</body>
</html>
